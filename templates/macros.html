
{% macro icons_list(aIcons, iIndex) -%}
<div class="right-panel-list grid">
    {% for aIcon in aIcons %}
    <div class="blk-item">
        <input type="checkbox" name="icons[]" id="icon_{{aIcon[0]}}" value="{{aIcon[0]}}">
        <label for="icon_{{aIcon[0]}}">
            <i class="bi {{aIcon[iIndex]}}"></i>
        </label>
    </div>
    {% endfor %}
</div>
{%- endmacro %}

{% macro dropdown(aList, sTitle) -%}
<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        {{ sTitle }}
    </button>
    <ul class="dropdown-menu">
        {% for oItem in aList %}
        <li><a class="dropdown-item" href="{{ oItem[0] }}">{{ oItem[1] }}</a></li>
        {% endfor %}
    </ul>
</div>
{%- endmacro %}

{% macro html_select_from_list(sName, aList, iValueIndex, iTitleIndex, sSelectedItem) -%}
<select class="form-select form-select-sm" name="{{ sName }}">
    {% for oItem in aList %}
    <option 
        value="{{oItem[iValueIndex]}}"
        {{ 'selected' if oItem[iValueIndex]|string == sSelectedItem|string }}
    >{{oItem[iTitleIndex]}}</option>
    {% endfor %}
</select>
{%- endmacro %}

{% macro list_panel(aList, sSelItemID, sName, iIndexID='id', iIndexTitle='name') -%}
<div class="list-panel panel-{{sName}}">
    <input type="hidden" name="select-{{sName}}" value="{{sSelItemID}}">

    <div class="btn-group w100">
        <button class="btn btn-primary" type="submit" name="reload" value="1"><i class="bi bi-arrow-repeat"></i></button>
        <button class="btn btn-success" type="submit" name="create_{{sName}}" value="1"><i class="bi bi-file-plus"></i></button>
        <button class="btn btn-secondary" type="submit" name="edit_{{sName}}" value="1"><i class="bi bi-pencil"></i></button>
        <button class="btn btn-danger" type="submit" name="remove_{{sName}}" value="1"><i class="bi bi-trash"></i></button>
        <button class="btn btn-danger" type="submit" name="clean_{{sName}}" value="1"><i class="bi bi-trash-fill"></i></button>
    </div>

    <div class="list-group left-panel-list">
        {% for oItem in aList %}
        {% set sID = oItem[iIndexID] %}
        {% set sTitle = oItem[iIndexTitle] %}
            <div class="input-group item-row">
                <div class="input-group-text">
                    <input class="form-check-input mt-0" type="checkbox" value="{{sID}}" name="{{sName}}[{{sID}}]" />
                </div>
                <button
                    class="list-group-item list-group-item-action {{ 'active' if sID|string == sSelItemID|string }} " 
                    type="submit"
                    name="select-{{sName}}"
                    value="{{sID}}"
                >
                    {{ sTitle|safe }}
                </button>
            </div>
        {% endfor %}
    </div>
</div>
{%- endmacro %}

{% macro tree_panel(aList, sSelItemID, sName, aOpened, iIndexID='id', iIndexTitle='name', iIndexLevel='level') -%}
<div class="tree-panel panel-tree-{{sName}}">
    <input type="hidden" name="select-{{sName}}" value="{{sSelItemID}}">

    {% for sID in aOpened %}
    <input type="hidden" name="{{sName}}[{{sID}}]" value="{{sID}}">
    {% endfor %}

    <div class="btn-group w100">
        <button class="btn btn-success" title="" type="submit" name="create_{{sName}}" value="1"><i class="bi bi-file-plus"></i></button>
        <button class="btn btn-secondary" title="" type="submit" name="edit_{{sName}}" value="1"><i class="bi bi-pencil"></i></button>
        <button class="btn btn-danger" title="" type="submit" name="remove_{{sName}}" value="1"><i class="bi bi-trash"></i></button>
        <button class="btn btn-danger" title="" type="submit" name="clean_{{sName}}" value="1"><i class="bi bi-trash-fill"></i></button>
        <button class="btn btn-secondary" title="Переместить" type="submit" name="move_{{sName}}" value="1"><i class="bi bi-bezier2"></i></button>
    </div>

    <div class="list-group left-panel-list">
        {% for oItem in aList %}
        {% set sID = oItem[iIndexID] %}
        {% set sTitle = oItem[iIndexTitle] %}
        {% set sLevel = oItem[iIndexLevel] %}
            <div class="input-group tree-item-row">
                <div class="input-group-text">
                    <input class="form-check-input mt-0" type="checkbox" value="{{sID}}" name="{{sName}}[{{sID}}]" />
                </div>
                <div class="input-group-text tree-icon">
                    {% if aOpened[sID]|string == sID|string %}
                        <button class="btn btn-light" type="submit" name="{{sName}}[{{sID}}]" value=""><i class="bi bi-dash-square"></i></button>
                    {% else %}
                        <button class="btn btn-light" type="submit" name="{{sName}}[{{sID}}]" value="{{sID}}"><i class="bi bi-plus-square"></i></button>
                    {% endif %}
                </div>
                <button 
                    class="list-group-item list-group-item-action title flex {{ 'active' if sID|string == sSelItemID|string }} " 
                    type="submit" 
                    name="select-{{sName}}" 
                    value="{{ sID }}"
                >
                    {{ sLevel|safe }}
                </button>
            </div>
        {% endfor %}
    </div>
</div>
{%- endmacro %}